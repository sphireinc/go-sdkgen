/* eslint-disable */
/**
 * AUTO-GENERATED by {{.Cfg.SDKName}} (go-sdkgen)
 * Do not edit manually.
 */

import { HttpMethod } from "./requests";

export interface Endpoint {
  uri: string;
  params?: string[];
  method: HttpMethod;
  headers?: Record<string, string>;
}

export type EndpointsMap = Record<string, Endpoint>;

const routes: EndpointsMap = {
{{- range .Model.Operations }}
  {{ .Name }}: {
    uri: "{{ .Path }}",
    params: [{{- range $i, $p := .PathParams }}{{ if $i }}, {{ end }}"{{ $p.Name }}"{{- end }}],
    method: "{{ .Method }}",
  },
{{- end }}
};

export const Endpoints = (): EndpointsMap => routes;

const placeholderPattern = /\{([^}]+)\}/g;

/**
 * Replaces variable placeholders in a URI with actual values.
 * @example
 * AttachEndpointVariable("/api/{id}", "123")  // → "/api/123"
 * AttachEndpointVariable("/api/{id}/{slug}", { id: "1", slug: "foo" }) // → "/api/1/foo"
 */
export const AttachEndpointVariable = (
  url: string,
  variables: Record<string, string | number> | string | number
): string => {
  if (typeof variables !== "object" || variables === null) {
    const match = placeholderPattern.exec(url);
    if (match) {
      return url.replace(placeholderPattern, String(variables));
    }
  }

  const variableValues = variables as Record<string, string | number>;
  return url.replace(placeholderPattern, (_, variableName) =>
    variableValues[variableName] !== undefined
      ? String(variableValues[variableName])
      : ""
  );
};