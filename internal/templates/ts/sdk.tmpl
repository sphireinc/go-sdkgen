/* eslint-disable */
/**
 * AUTO-GENERATED by {{.Cfg.SDKName}} (go-sdkgen)
 * Do not edit manually.
 */

import { Endpoints, AttachEndpointVariable } from "./routes";
import { ApiResult, req, RequestConfig } from "./requests";

export type QueryValue = string | number | boolean | null | undefined;
export type Query = Record<string, QueryValue>;
export type PathParams = Record<string, string | number>;

const toQueryString = (query?: Query): string => {
  if (!query) return "";
  const params = new URLSearchParams();
  for (const [k, v] of Object.entries(query)) {
    if (v === undefined || v === null) continue;
    params.append(k, String(v));
  }
  const s = params.toString();
  return s ? `?${s}` : "";
};

{{- range .Model.Operations }}

/**
 * {{ if .Summary }}{{ .Summary }}{{ else }}{{ .Name }}{{ end }}
 */
export const {{ .Name }} = async (
  path?: PathParams,
  query?: Query,
  body?: unknown,
  config: RequestConfig = {}
): Promise<ApiResult> => {
  const { method, uri } = Endpoints().{{ .Name }};

  {{- if gt (len .PathParams) 0 }}
  const finalUri = AttachEndpointVariable(uri, path ?? {});
  {{- else }}
  const finalUri = uri;
  {{- end }}

  const withQuery = finalUri + toQueryString(query);

  {{- if .HasBody }}
  return req(method, withQuery, body, config);
  {{- else }}
  return req(method, withQuery, undefined, config);
  {{- end }}
};

{{- end }}